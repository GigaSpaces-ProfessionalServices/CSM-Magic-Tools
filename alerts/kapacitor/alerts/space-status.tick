dbrp "telegraf"."autogen"

var alert_name = 'space-status'

stream
    |from()
        .measurement('gcState')
        .groupBy('pu')
    |alert()
        .crit(lambda: "state" == 'faulty')
        .warn(lambda: "state" == 'partial')
        .stateChangesOnly(1d)
        .message('{{ .Vars.alert_name }} for PU {{ index .Tags "pu" }} - {{ .Level }} - {{ .Name }}')
        .details('PU id.{{ index .Tags "pu" }} is {{ index .Values "state" }}')